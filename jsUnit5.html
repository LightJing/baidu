<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .listyle{
            display: block;
            width: 50px;
            background-color: aqua;
            text-align: center;
            margin: 5px;
            float: left;
        }
    </style>
</head>
<body>
<div>
    <p>请输入插入数组的数字</p>
    <input type="text" id="data">
    <input type="button" id="addLeft" value="左插入">
    <input type="button" id="addRight" value="右插入">
    <input type="button" id="deleteLeft" value="左侧出">
    <input type="button" id="deleteRight" value="右侧出">
</div>
<div>
    <ul id="show">

    </ul>
</div>
<script>
    //创建一个数组
    var data = new Array;

    //获取用户输入的字符
    var node = document.getElementById("data");

    //获取显示列表节点
    var ulnode = document.getElementById("show");

    //输入判断
    function judge(num) {
        //判断队列是否超长
        if(data.length == 60){
            alert("队列长度已满60，无法继续插入！");
        }else{
            //输入的元素进行判断
            if(isNaN(num)){
                alert("请输入数字");
            }else{
                if(num<10 || num >100){
                    alert("请输入10-100范围内的数字");
                }else{
                    return true;
                }
            }
        }


    }

    //将data数组中的数字队列显示
    function showdata(data) {
        //删除已显示的数字
        while(ulnode.hasChildNodes()){
            ulnode.removeChild(ulnode.firstChild);
        }

        //将数组重新列出
        data.forEach(function (num) {
            var linode = document.createElement("li");
            linode.setAttribute("class","listyle");
            linode.style.marginTop = (100-num)+"px";
            linode.style.height = num+"px";
            ulnode.appendChild(linode);
        })

    }
    
    //排序
    function resort(data) {
        //将数组的长度先赋值给一个变量，避免了每循环一次，就要去计算一个data.length的值，提高效率
        var stop = data.length;
        //获取li节点
        var linodes = ulnode.childNodes;
        //冒泡排序
        for(var i=0;i<data.length;i++){
            for(var j=0;j<stop-1;j++){
                if (data[j] > data[j + 1]) {
                    var temp = data[j];
                    data[j] = data[j + 1];
                    data[j + 1] = temp;
                    
                    //将两个节点的高度随之改变
                    linodes[j].style.height = data[j] + "px";
                    linodes[j].style.marginTop = (100 - data[j]) + "px";
                    linodes[j + 1].style.height = data[j + 1] + "px";
                    linodes[j + 1].style.marginTop = (100 - data[j + 1]) + "px";
                }

            }
        }
        
    }

    //队列中左边插入输入的数字
    function addLeft() {
        var num =node.value;
        if(judge(num)){
            data.unshift(num);
            showdata(data);
            resort(data);
        }
    }

    //给左插入按钮绑定点击事件
    function button1(){
        document.getElementById("addLeft").onclick = addLeft;

    }

    //队列中右边插入输入的数字
    function addRight() {
        var num =node.value;
        if(judge(num)){
            data.push(num);
            showdata(data);
            resort(data);
        }
    }

    //给右插入按钮绑定点击事件
    function button2() {
        document.getElementById("addRight").onclick = addRight;

    }

    //队列中左边输出
    function deleteLeft() {
        var num = data.shift();
        showdata(data);
        resort(data);
        alert(num);

    }

    //给左侧出按钮绑定点击事件
    function button3() {
        document.getElementById("deleteLeft").onclick = deleteLeft;

    }

    //队列中右边输出
    function deleteRight() {
        var num = data.pop();
        showdata(data);
        resort(data);
        alert(num);

    }

    //给右侧出按钮绑定点击事件
    function button4() {
        document.getElementById("deleteRight").onclick = deleteRight;
    }

    function init() {
        button1();
        button2();
        button3();
        button4();
    }

    init();
</script>
</body>
</html>